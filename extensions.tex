
\section{Extending the Core}
\label{sec:extensions}

The core calculus assumes broadcast visibility: every move sees all
past moves. We now extend this by allowing binders to specify
\emph{information constraints}, in the style of IF logic.

\subsection{Property-Annotated Binders: \texorpdfstring{$\langle$private, public$\rangle$}{<private, public>} }
\label{subsec:prop-annot-binders}

We extend the core binder so that each move simultaneously fixes a \emph{private
value} and publishes a (possibly empty) set of \emph{public properties} about
that value. Intuitively, a standard ``commit'' is the special case where no
informative property is published at bind time.

\paragraph{Syntax.}
A binder occurrence is written
\[
  P_i\, x.\, [\Pi] \;\; \Phi
\]
where $x$ is the private value chosen by role $i$, and $\Pi$ is a finite set of
first-order formulas (the \emph{public certificate}) whose free variables are
drawn from the variables visible at this point \emph{together with} $x$:
\[
  \Pi \subseteq \fo\big(\mathrm{Vars}_{\mathrm{vis}}(x) \cup \{x\}\big).
\]
We write $\top$ for the trivially true formula. The special case
$[\Pi]=[\{\top\}]$ corresponds to a \emph{pure commitment} of $x$ (type-theory
readers may think of ``unit''; here we use logical $\top$).

\paragraph{Public theory and well-formedness.}
Let the underlying visibility order be the usual prefix order on binders. The
\emph{public theory} available just before a binder $u$ is
\[
  \Sigma_{\mathrm{pub}}(u) \;\;\coloneqq\;\; \bigcup_{b \prec u} \Pi_b.
\]
A binder is \emph{well-formed} if every $\varphi\in\Pi$ mentions only variables
in $\mathrm{Vars}_{\mathrm{vis}}(x)\cup\{x\}$ (no forward references). By
construction, $\Sigma_{\mathrm{pub}}$ is monotone in the order: if $v\preceq u$
then $\Sigma_{\mathrm{pub}}(v)\subseteq \Sigma_{\mathrm{pub}}(u)$.

\paragraph{Identifiability and value-visibility.}
A predecessor value $x_a$ is \emph{identifiable} at binder $u$ if there exists
a term $t$ over the variables $u$ may name such that
\[
  \Id_u(x_a) \;\;\coloneqq\;\; \exists t\ \text{over }\mathrm{Vars}_{\mathrm{vis}}(u)
  \text{ with } \Sigma_{\mathrm{pub}}(u)\ \vdash\ x_a = t .
\]
We define the (direct) \emph{value-visibility} edge by
\[
  (a \to u) \in \mathrm{vis} \quad\Longleftrightarrow\quad \Id_u(x_a).
\]
Thus a node may depend \emph{causally} on the fact that $a$ chose (it sees $a$
in the order) without yet depending on the \emph{value}; the latter becomes
legal precisely when $x_a$ is identifiable from the accumulated public theory.

\paragraph{Consequences.}
\begin{itemize}
  \item \textbf{Monotonicity.} If $v\preceq u$ and $\Id_v(x_a)$ then
  $\Id_u(x_a)$. Hence for each $a$, the knowing set
  $K(x_a)=\{u \mid \Id_u(x_a)\}$ is an up-set in the prefix DAG.
  \item \textbf{Commit and reveal (as strengthening).}
  A ``reveal of $x_a$ at $r$'' is simply that $\Pi_r$ makes $\Id_r(x_a)$ true,
  e.g.\ by asserting $x_a=y_r$ for $r$'s public name $y_r$ or any other formula
  that functionally pins $x_a$.
  \item \textbf{Staged disclosure.}
  If $\Pi$ contains only local facts, identifiability can start at multiple
  incomparable \emph{minimal} points $r_1,\dots,r_m$; then
  $K(x_a)=\bigcup_j \uparrow r_j$. This captures branch-specific early openings
  followed by wider disclosure later.
\end{itemize}

\paragraph{Conservative extension.}
If every binder uses $[\{\top\}]$, no $x$ becomes identifiable before an
explicit equality appears; value-visibility collapses to the base setting (no
additional edges beyond those introduced by later equalities). Conversely, any
pattern of edges that is a finite union of principal up-sets per source can be
realized by placing equalities in the corresponding minimal binders.

\paragraph{Examples.}
\begin{itemize}
  \item \emph{Pure commit.} $P_i\,x.[\top]$ publishes nothing informative:
  $\Id_u(x)$ fails for all $u$ until a later binder asserts a property that pins
  $x$ (e.g.\ $x=y$ or a uniqueness constraint).
  \item \emph{Reveal by equality.} Later binder $r$ introduces $y$ and publishes
  $[\{x=y\}]$. Then $\Id_u(x)$ holds for any $u$ that can name $y$.
  \item \emph{Reveal by uniqueness.} If $r$ publishes $[\{\exists! z.\,\psi(z,\bar v),\ \psi(x,\bar v)\}]$,
  then $\Sigma_{\mathrm{pub}}(r)\vdash x = \iota z.\psi(z,\bar v)$, so $\Id_r(x)$.
\end{itemize}

\paragraph{Remark (terminology).}
We write $\top$ for the trivially true property; in type-theoretic terms one may
think of the \emph{unit} type. The intended reading here is logical: a pure
commitment is $\langle x, \top\rangle$.
